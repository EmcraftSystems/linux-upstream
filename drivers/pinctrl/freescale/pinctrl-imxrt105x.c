/*
 * Copyright (C) 2017 Emcraft Systems
 *
 * This program is free software; you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 2 as
 * published by the Free Software Foundation.
 */

#include <linux/err.h>
#include <linux/init.h>
#include <linux/io.h>
#include <linux/module.h>
#include <linux/of.h>
#include <linux/of_device.h>
#include <linux/pinctrl/pinctrl.h>

#include "pinctrl-imx.h"

enum imxrt105x_pads {
	MXRT105X_PAD_RESERVE0 = 0,
	MXRT105X_PAD_RESERVE1 = 1,
	MXRT105X_PAD_RESERVE2 = 2,
	MXRT105X_PAD_RESERVE3 = 3,
	MXRT105X_PAD_RESERVE4 = 4,
	MXRT105X_PAD_EMC_00 = 5,
	MXRT105X_PAD_EMC_01 = 6,
	MXRT105X_PAD_EMC_02 = 7,
	MXRT105X_PAD_EMC_03 = 8,
	MXRT105X_PAD_EMC_04 = 9,
	MXRT105X_PAD_EMC_05 = 10,
	MXRT105X_PAD_EMC_06 = 11,
	MXRT105X_PAD_EMC_07 = 12,
	MXRT105X_PAD_EMC_08 = 13,
	MXRT105X_PAD_EMC_09 = 14,
	MXRT105X_PAD_EMC_10 = 15,
	MXRT105X_PAD_EMC_11 = 16,
	MXRT105X_PAD_EMC_12 = 17,
	MXRT105X_PAD_EMC_13 = 18,
	MXRT105X_PAD_EMC_14 = 19,
	MXRT105X_PAD_EMC_15 = 20,
	MXRT105X_PAD_EMC_16 = 21,
	MXRT105X_PAD_EMC_17 = 22,
	MXRT105X_PAD_EMC_18 = 23,
	MXRT105X_PAD_EMC_19 = 24,
	MXRT105X_PAD_EMC_20 = 25,
	MXRT105X_PAD_EMC_21 = 26,
	MXRT105X_PAD_EMC_22 = 27,
	MXRT105X_PAD_EMC_23 = 28,
	MXRT105X_PAD_EMC_24 = 29,
	MXRT105X_PAD_EMC_25 = 30,
	MXRT105X_PAD_EMC_26 = 31,
	MXRT105X_PAD_EMC_27 = 32,
	MXRT105X_PAD_EMC_28 = 33,
	MXRT105X_PAD_EMC_29 = 34,
	MXRT105X_PAD_EMC_30 = 35,
	MXRT105X_PAD_EMC_31 = 36,
	MXRT105X_PAD_EMC_32 = 37,
	MXRT105X_PAD_EMC_33 = 38,
	MXRT105X_PAD_EMC_34 = 39,
	MXRT105X_PAD_EMC_35 = 40,
	MXRT105X_PAD_EMC_36 = 41,
	MXRT105X_PAD_EMC_37 = 42,
	MXRT105X_PAD_EMC_38 = 43,
	MXRT105X_PAD_EMC_39 = 44,
	MXRT105X_PAD_EMC_40 = 45,
	MXRT105X_PAD_EMC_41 = 46,
	MXRT105X_PAD_AD_B0_00 = 47,
	MXRT105X_PAD_AD_B0_01 = 48,
	MXRT105X_PAD_AD_B0_02 = 49,
	MXRT105X_PAD_AD_B0_03 = 50,
	MXRT105X_PAD_AD_B0_04 = 51,
	MXRT105X_PAD_AD_B0_05 = 52,
	MXRT105X_PAD_AD_B0_06 = 53,
	MXRT105X_PAD_AD_B0_07 = 54,
	MXRT105X_PAD_AD_B0_08 = 55,
	MXRT105X_PAD_AD_B0_09 = 56,
	MXRT105X_PAD_AD_B0_10 = 57,
	MXRT105X_PAD_AD_B0_11 = 58,
	MXRT105X_PAD_AD_B0_12 = 59,
	MXRT105X_PAD_AD_B0_13 = 60,
	MXRT105X_PAD_AD_B0_14 = 61,
	MXRT105X_PAD_AD_B0_15 = 62,
	MXRT105X_PAD_AD_B1_00 = 63,
	MXRT105X_PAD_AD_B1_01 = 64,
	MXRT105X_PAD_AD_B1_02 = 65,
	MXRT105X_PAD_AD_B1_03 = 66,
	MXRT105X_PAD_AD_B1_04 = 67,
	MXRT105X_PAD_AD_B1_05 = 68,
	MXRT105X_PAD_AD_B1_06 = 69,
	MXRT105X_PAD_AD_B1_07 = 70,
	MXRT105X_PAD_AD_B1_08 = 71,
	MXRT105X_PAD_AD_B1_09 = 72,
	MXRT105X_PAD_AD_B1_10 = 73,
	MXRT105X_PAD_AD_B1_11 = 74,
	MXRT105X_PAD_AD_B1_12 = 75,
	MXRT105X_PAD_AD_B1_13 = 76,
	MXRT105X_PAD_AD_B1_14 = 77,
	MXRT105X_PAD_AD_B1_15 = 78,
	MXRT105X_PAD_B0_00 = 79,
	MXRT105X_PAD_B0_01 = 80,
	MXRT105X_PAD_B0_02 = 81,
	MXRT105X_PAD_B0_03 = 82,
	MXRT105X_PAD_B0_04 = 83,
	MXRT105X_PAD_B0_05 = 84,
	MXRT105X_PAD_B0_06 = 85,
	MXRT105X_PAD_B0_07 = 86,
	MXRT105X_PAD_B0_08 = 87,
	MXRT105X_PAD_B0_09 = 88,
	MXRT105X_PAD_B0_10 = 89,
	MXRT105X_PAD_B0_11 = 90,
	MXRT105X_PAD_B0_12 = 91,
	MXRT105X_PAD_B0_13 = 92,
	MXRT105X_PAD_B0_14 = 93,
	MXRT105X_PAD_B0_15 = 94,
	MXRT105X_PAD_B1_00 = 95,
	MXRT105X_PAD_B1_01 = 96,
	MXRT105X_PAD_B1_02 = 97,
	MXRT105X_PAD_B1_03 = 98,
	MXRT105X_PAD_B1_04 = 99,
	MXRT105X_PAD_B1_05 = 100,
	MXRT105X_PAD_B1_06 = 101,
	MXRT105X_PAD_B1_07 = 102,
	MXRT105X_PAD_B1_08 = 103,
	MXRT105X_PAD_B1_09 = 104,
	MXRT105X_PAD_B1_10 = 105,
	MXRT105X_PAD_B1_11 = 106,
	MXRT105X_PAD_B1_12 = 107,
	MXRT105X_PAD_B1_13 = 108,
	MXRT105X_PAD_B1_14 = 109,
	MXRT105X_PAD_B1_15 = 110,
	MXRT105X_PAD_SD_B0_00 = 111,
	MXRT105X_PAD_SD_B0_01 = 112,
	MXRT105X_PAD_SD_B0_02 = 113,
	MXRT105X_PAD_SD_B0_03 = 114,
	MXRT105X_PAD_SD_B0_04 = 115,
	MXRT105X_PAD_SD_B0_05 = 116,
	MXRT105X_PAD_SD_B1_00 = 117,
	MXRT105X_PAD_SD_B1_01 = 118,
	MXRT105X_PAD_SD_B1_02 = 119,
	MXRT105X_PAD_SD_B1_03 = 120,
	MXRT105X_PAD_SD_B1_04 = 121,
	MXRT105X_PAD_SD_B1_05 = 122,
	MXRT105X_PAD_SD_B1_06 = 123,
	MXRT105X_PAD_SD_B1_07 = 124,
	MXRT105X_PAD_SD_B1_08 = 125,
	MXRT105X_PAD_SD_B1_09 = 126,
	MXRT105X_PAD_SD_B1_10 = 127,
	MXRT105X_PAD_SD_B1_11 = 128,
};

/* Pad names for the pinmux subsystem */
static const struct pinctrl_pin_desc imxrt105x_pinctrl_pads[] = {
	IMX_PINCTRL_PIN(MXRT105X_PAD_RESERVE0),
	IMX_PINCTRL_PIN(MXRT105X_PAD_RESERVE1),
	IMX_PINCTRL_PIN(MXRT105X_PAD_RESERVE2),
	IMX_PINCTRL_PIN(MXRT105X_PAD_RESERVE3),
	IMX_PINCTRL_PIN(MXRT105X_PAD_RESERVE4),
	IMX_PINCTRL_PIN(MXRT105X_PAD_EMC_00),
	IMX_PINCTRL_PIN(MXRT105X_PAD_EMC_01),
	IMX_PINCTRL_PIN(MXRT105X_PAD_EMC_02),
	IMX_PINCTRL_PIN(MXRT105X_PAD_EMC_03),
	IMX_PINCTRL_PIN(MXRT105X_PAD_EMC_04),
	IMX_PINCTRL_PIN(MXRT105X_PAD_EMC_05),
	IMX_PINCTRL_PIN(MXRT105X_PAD_EMC_06),
	IMX_PINCTRL_PIN(MXRT105X_PAD_EMC_07),
	IMX_PINCTRL_PIN(MXRT105X_PAD_EMC_08),
	IMX_PINCTRL_PIN(MXRT105X_PAD_EMC_09),
	IMX_PINCTRL_PIN(MXRT105X_PAD_EMC_10),
	IMX_PINCTRL_PIN(MXRT105X_PAD_EMC_11),
	IMX_PINCTRL_PIN(MXRT105X_PAD_EMC_12),
	IMX_PINCTRL_PIN(MXRT105X_PAD_EMC_13),
	IMX_PINCTRL_PIN(MXRT105X_PAD_EMC_14),
	IMX_PINCTRL_PIN(MXRT105X_PAD_EMC_15),
	IMX_PINCTRL_PIN(MXRT105X_PAD_EMC_16),
	IMX_PINCTRL_PIN(MXRT105X_PAD_EMC_17),
	IMX_PINCTRL_PIN(MXRT105X_PAD_EMC_18),
	IMX_PINCTRL_PIN(MXRT105X_PAD_EMC_19),
	IMX_PINCTRL_PIN(MXRT105X_PAD_EMC_20),
	IMX_PINCTRL_PIN(MXRT105X_PAD_EMC_21),
	IMX_PINCTRL_PIN(MXRT105X_PAD_EMC_22),
	IMX_PINCTRL_PIN(MXRT105X_PAD_EMC_23),
	IMX_PINCTRL_PIN(MXRT105X_PAD_EMC_24),
	IMX_PINCTRL_PIN(MXRT105X_PAD_EMC_25),
	IMX_PINCTRL_PIN(MXRT105X_PAD_EMC_26),
	IMX_PINCTRL_PIN(MXRT105X_PAD_EMC_27),
	IMX_PINCTRL_PIN(MXRT105X_PAD_EMC_28),
	IMX_PINCTRL_PIN(MXRT105X_PAD_EMC_29),
	IMX_PINCTRL_PIN(MXRT105X_PAD_EMC_30),
	IMX_PINCTRL_PIN(MXRT105X_PAD_EMC_31),
	IMX_PINCTRL_PIN(MXRT105X_PAD_EMC_32),
	IMX_PINCTRL_PIN(MXRT105X_PAD_EMC_33),
	IMX_PINCTRL_PIN(MXRT105X_PAD_EMC_34),
	IMX_PINCTRL_PIN(MXRT105X_PAD_EMC_35),
	IMX_PINCTRL_PIN(MXRT105X_PAD_EMC_36),
	IMX_PINCTRL_PIN(MXRT105X_PAD_EMC_37),
	IMX_PINCTRL_PIN(MXRT105X_PAD_EMC_38),
	IMX_PINCTRL_PIN(MXRT105X_PAD_EMC_39),
	IMX_PINCTRL_PIN(MXRT105X_PAD_EMC_40),
	IMX_PINCTRL_PIN(MXRT105X_PAD_EMC_41),
	IMX_PINCTRL_PIN(MXRT105X_PAD_AD_B0_00),
	IMX_PINCTRL_PIN(MXRT105X_PAD_AD_B0_01),
	IMX_PINCTRL_PIN(MXRT105X_PAD_AD_B0_02),
	IMX_PINCTRL_PIN(MXRT105X_PAD_AD_B0_03),
	IMX_PINCTRL_PIN(MXRT105X_PAD_AD_B0_04),
	IMX_PINCTRL_PIN(MXRT105X_PAD_AD_B0_05),
	IMX_PINCTRL_PIN(MXRT105X_PAD_AD_B0_06),
	IMX_PINCTRL_PIN(MXRT105X_PAD_AD_B0_07),
	IMX_PINCTRL_PIN(MXRT105X_PAD_AD_B0_08),
	IMX_PINCTRL_PIN(MXRT105X_PAD_AD_B0_09),
	IMX_PINCTRL_PIN(MXRT105X_PAD_AD_B0_10),
	IMX_PINCTRL_PIN(MXRT105X_PAD_AD_B0_11),
	IMX_PINCTRL_PIN(MXRT105X_PAD_AD_B0_12),
	IMX_PINCTRL_PIN(MXRT105X_PAD_AD_B0_13),
	IMX_PINCTRL_PIN(MXRT105X_PAD_AD_B0_14),
	IMX_PINCTRL_PIN(MXRT105X_PAD_AD_B0_15),
	IMX_PINCTRL_PIN(MXRT105X_PAD_AD_B1_00),
	IMX_PINCTRL_PIN(MXRT105X_PAD_AD_B1_01),
	IMX_PINCTRL_PIN(MXRT105X_PAD_AD_B1_02),
	IMX_PINCTRL_PIN(MXRT105X_PAD_AD_B1_03),
	IMX_PINCTRL_PIN(MXRT105X_PAD_AD_B1_04),
	IMX_PINCTRL_PIN(MXRT105X_PAD_AD_B1_05),
	IMX_PINCTRL_PIN(MXRT105X_PAD_AD_B1_06),
	IMX_PINCTRL_PIN(MXRT105X_PAD_AD_B1_07),
	IMX_PINCTRL_PIN(MXRT105X_PAD_AD_B1_08),
	IMX_PINCTRL_PIN(MXRT105X_PAD_AD_B1_09),
	IMX_PINCTRL_PIN(MXRT105X_PAD_AD_B1_10),
	IMX_PINCTRL_PIN(MXRT105X_PAD_AD_B1_11),
	IMX_PINCTRL_PIN(MXRT105X_PAD_AD_B1_12),
	IMX_PINCTRL_PIN(MXRT105X_PAD_AD_B1_13),
	IMX_PINCTRL_PIN(MXRT105X_PAD_AD_B1_14),
	IMX_PINCTRL_PIN(MXRT105X_PAD_AD_B1_15),
	IMX_PINCTRL_PIN(MXRT105X_PAD_B0_00),
	IMX_PINCTRL_PIN(MXRT105X_PAD_B0_01),
	IMX_PINCTRL_PIN(MXRT105X_PAD_B0_02),
	IMX_PINCTRL_PIN(MXRT105X_PAD_B0_03),
	IMX_PINCTRL_PIN(MXRT105X_PAD_B0_04),
	IMX_PINCTRL_PIN(MXRT105X_PAD_B0_05),
	IMX_PINCTRL_PIN(MXRT105X_PAD_B0_06),
	IMX_PINCTRL_PIN(MXRT105X_PAD_B0_07),
	IMX_PINCTRL_PIN(MXRT105X_PAD_B0_08),
	IMX_PINCTRL_PIN(MXRT105X_PAD_B0_09),
	IMX_PINCTRL_PIN(MXRT105X_PAD_B0_10),
	IMX_PINCTRL_PIN(MXRT105X_PAD_B0_11),
	IMX_PINCTRL_PIN(MXRT105X_PAD_B0_12),
	IMX_PINCTRL_PIN(MXRT105X_PAD_B0_13),
	IMX_PINCTRL_PIN(MXRT105X_PAD_B0_14),
	IMX_PINCTRL_PIN(MXRT105X_PAD_B0_15),
	IMX_PINCTRL_PIN(MXRT105X_PAD_B1_00),
	IMX_PINCTRL_PIN(MXRT105X_PAD_B1_01),
	IMX_PINCTRL_PIN(MXRT105X_PAD_B1_02),
	IMX_PINCTRL_PIN(MXRT105X_PAD_B1_03),
	IMX_PINCTRL_PIN(MXRT105X_PAD_B1_04),
	IMX_PINCTRL_PIN(MXRT105X_PAD_B1_05),
	IMX_PINCTRL_PIN(MXRT105X_PAD_B1_06),
	IMX_PINCTRL_PIN(MXRT105X_PAD_B1_07),
	IMX_PINCTRL_PIN(MXRT105X_PAD_B1_08),
	IMX_PINCTRL_PIN(MXRT105X_PAD_B1_09),
	IMX_PINCTRL_PIN(MXRT105X_PAD_B1_10),
	IMX_PINCTRL_PIN(MXRT105X_PAD_B1_11),
	IMX_PINCTRL_PIN(MXRT105X_PAD_B1_12),
	IMX_PINCTRL_PIN(MXRT105X_PAD_B1_13),
	IMX_PINCTRL_PIN(MXRT105X_PAD_B1_14),
	IMX_PINCTRL_PIN(MXRT105X_PAD_B1_15),
	IMX_PINCTRL_PIN(MXRT105X_PAD_SD_B0_00),
	IMX_PINCTRL_PIN(MXRT105X_PAD_SD_B0_01),
	IMX_PINCTRL_PIN(MXRT105X_PAD_SD_B0_02),
	IMX_PINCTRL_PIN(MXRT105X_PAD_SD_B0_03),
	IMX_PINCTRL_PIN(MXRT105X_PAD_SD_B0_04),
	IMX_PINCTRL_PIN(MXRT105X_PAD_SD_B0_05),
	IMX_PINCTRL_PIN(MXRT105X_PAD_SD_B1_00),
	IMX_PINCTRL_PIN(MXRT105X_PAD_SD_B1_01),
	IMX_PINCTRL_PIN(MXRT105X_PAD_SD_B1_02),
	IMX_PINCTRL_PIN(MXRT105X_PAD_SD_B1_03),
	IMX_PINCTRL_PIN(MXRT105X_PAD_SD_B1_04),
	IMX_PINCTRL_PIN(MXRT105X_PAD_SD_B1_05),
	IMX_PINCTRL_PIN(MXRT105X_PAD_SD_B1_06),
	IMX_PINCTRL_PIN(MXRT105X_PAD_SD_B1_07),
	IMX_PINCTRL_PIN(MXRT105X_PAD_SD_B1_08),
	IMX_PINCTRL_PIN(MXRT105X_PAD_SD_B1_09),
	IMX_PINCTRL_PIN(MXRT105X_PAD_SD_B1_10),
	IMX_PINCTRL_PIN(MXRT105X_PAD_SD_B1_11),
};

static struct imx_pinctrl_soc_info imxrt105x_pinctrl_info = {
	.pins = imxrt105x_pinctrl_pads,
	.npins = ARRAY_SIZE(imxrt105x_pinctrl_pads),
};

static const struct of_device_id imxrt105x_pinctrl_of_match[] = {
	{ .compatible = "fsl,imxrt105x-iomuxc", },
	{ /* sentinel */ }
};

static int imxrt105x_pinctrl_probe(struct platform_device *pdev)
{
	return imx_pinctrl_probe(pdev, &imxrt105x_pinctrl_info);
}

static struct platform_driver imxrt105x_pinctrl_driver = {
	.driver = {
		.name = "imxrt105x-pinctrl",
		.of_match_table = of_match_ptr(imxrt105x_pinctrl_of_match),
	},
	.probe = imxrt105x_pinctrl_probe,
	.remove = imx_pinctrl_remove,
};

static int __init imxrt105x_pinctrl_init(void)
{
	return platform_driver_register(&imxrt105x_pinctrl_driver);
}
arch_initcall(imxrt105x_pinctrl_init);

static void __exit imxrt105x_pinctrl_exit(void)
{
	platform_driver_unregister(&imxrt105x_pinctrl_driver);
}
module_exit(imxrt105x_pinctrl_exit);

MODULE_AUTHOR("Dmitry Konyshev <probables@emcraft.com>");
MODULE_DESCRIPTION("Freescale imxrt105x pinctrl driver");
MODULE_LICENSE("GPL v2");
